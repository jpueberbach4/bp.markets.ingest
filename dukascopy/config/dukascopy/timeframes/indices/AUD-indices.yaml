# Instrument-Specific Timeframe Resampling Configuration
#
# This section defines custom resampling rules for individual instruments.
# It overrides or extends the default resampling behavior by specifying how
# higher timeframes (e.g. 4H) are constructed from lower source timeframes
# (e.g. 1H) on a per-symbol basis.
#
# For each instrument:
#   - timeframes lists the target timeframes to generate.
#   - rule defines the resampling interval (pandas-style, e.g. "4H").
#   - source specifies the base timeframe used for aggregation.
#   - origin sets the alignment anchor (exchange/session-specific start time).
#   - label and closed control candle labeling and boundary inclusion.
#
# This is primarily used for instruments with non-standard session starts
# (e.g. bonds), ensuring correct candle alignment and consistent historical
# aggregation.
#
# Please note that the ORIGIN field is set to the candle alignment as if it were winter in Europe.
#
# ---
#
# AUS.IDX-AUD (ASX). The Aussie index has 2 trading sessions (for futures and derivatives). 
# 
# - Day Session: 9:50 AM - 4:30 PM (AEST) **
# - Overnight (After-Hours) Session: 5:10 PM - 7:00 AM the next morning (AEST) **
# - There is a short break between sessions (4:30 PM - 5:10 PM).
#
# This one has an "insane configruation". Don't expect it to be FULLY complete.
# If you find issues, modify it to suit it better. For me it's impossible to check
# every asset in FULL detail. I will do it someday, but for now, no.
#
AUS.IDX-AUD:
  timezone: Australia/Sydney
  skip_timeframes: []
  sessions:
    special-case:
      # This is a special handling for the AUS.IDX. 
      # Before 2024-06-24 we have ONLY on MONDAY EPOCH candles, during the DAY-session ONLY
      weekdays: [0] # 0=monday, 1=tuesday, and so on..
      to_date: "2024-06-22 01:00:00"  # In Australia/Sydney time
      ranges:
        day: 
          from: "09:50"
          to: "17:09"
      timeframes:
        4h:                     
          origin: "epoch"
          post:
            # franken candle cleanup
            merge-step:
              action: merge
              ends_with:
              - "10:10:00"
              offset: -1    
    day-session:
      # We have an alignment policy change happening on 2020-02-07
      # We move from EPOCH based candles to DAY-session candles aligned at 00:50
      # EXCEPT MONDAY, see above
      from_date: "2020-02-07 01:00:00"  # In Australia/Sydney time
      ranges: 
        day:
          from: "09:50"
          to: "16:30"
      timeframes:                    
        15m:                     
          origin: "00:50"
        30m:                     
          origin: "00:50" 
        1h:                     
          origin: "00:50"
        4h:                     
          origin: "00:50"     
    after-hours:
      # We have an alignment policy change happening on 2020-02-07
      # We move from EPOCH based candles to DAY-session candles aligned at 08:10
      # EXCEPT MONDAY, see above
      from_date: "2020-02-07 01:00:00" # In Australia/Sydney time
      ranges: 
        day:
          from: "17:10"
          to: "23:59"
        night:
          from: "00:00"
          to: "07:00" 
      timeframes:                    
        15m:                     
          origin: "08:10"
        30m:                     
          origin: "08:10" 
        1h:                     
          origin: "08:10"
        4h:                     
          origin: "08:10"
    ancient:
      # We have an alignment policy change happening on 2020-02-07
      # This is before that period. We didnt specify any origins
      # so the default alignment is inherited from the defaults
      # Which is EPOCH
      to_date: "2020-02-07 01:00:00"
      ranges:
        24h:
          from: "00:00"
          to: "23:59"
    # This is to prevent OUT_OF_MARKET errors for W1
    catch-all:
      ranges: 
        24h:
          from: "00:00"
          to: "23:59"
